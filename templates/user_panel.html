<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè∞</text></svg>">

      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
      <title>Epic Enclaves</title>
      <style>
hr {
  margin-top: 1rem;
  margin-bottom: 1rem;
  border: 0;
  border-top: 10px solid rgba(0, 0, 0, 0.1);
}

         /* Custom CSS to adjust the layout */
         body {
            background-color: #f0f0f0;
         }

         .container p {
            margin: 0px; /* Reduce spacing between lines */
         }
         .row.mb-3 .col {
            margin-bottom: 10px;
         }
         .system-message {
            background-color: #cce5ff;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
         }

         .btn-group {
            margin: 5px;
         }
         /* Customize button styles */
         .btn-map {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;
            margin: 5px; /* Normal spacing between navigation buttons */
         }

         .btn-map:hover {
            background-color: #0056b3;
         }


          .btn-quit {
            background-color: #007bff;
            color: #fff;
            border-color: #007bff;
            margin: 5px; /* Normal spacing between navigation buttons */
         }

         .btn-quit:hover {
            background-color: crimson;
         }


         .btn-move {
            background-color: #28a745;
            color: #fff;
            margin: 5px; /* Normal spacing between navigation buttons */
         }
         .btn-move:hover {
            background-color: #218838;
         }

         /* Compact user statistics */

         .profile-container {
            display: flex;
            align-items: flex-start; /* Align items to the top */
         }
         .profile-picture {
            margin-right: 20px; /* Add some space between profile picture and user statistics */
            margin-top: 20px;
         }
      </style>
   </head>
   <body>
      <div class="container system-message">
         <p>System message: {{message}}</p>
      </div>
      <div class="container">
         <div class="row">
            <div class="col-md-6">
               <div class="profile-container">
                  <div class="profile-picture">
                     <img src="{{file['img']}}" alt="Profile Picture" width="100">
                  </div>
                  <div>

<div class="card mt-3">
  <div class="card-header">
    <h4 class="card-title">Welcome, {{user}}</h4>
  </div>
  <div class="card-body">
    <p class="card-text">Age: {{file["age"]}}</p>
    <p class="card-text">Experience: {{file["exp"]}}</p>
    <p class="card-text">Health Points: {{file["hp"]}}</p>
    <p class="card-text">Armor: {{file["armor"]}}</p>
    <p class="card-text">Action points: {{file["action_points"]}}</p>
    <p class="card-text">Position: ({{file["x_pos"]}}, {{file["y_pos"]}})</p>
  </div>
</div>


                  </div>
               </div>
            </div>
            <!-- Navigation menu placed next to the compact-stats -->
            <div class="col-md-6 navigation-menu">

               <div class="btn-group">
                  <a id="btnUp" class="btn btn-move btn-lg active" href="/move?direction=up" role="button">Up üîº</a>
                  <a id="btnDown" class="btn btn-move btn-lg active" href="/move?direction=down" role="button">Down üîΩ</a>
                  <a id="btnLeft" class="btn btn-move btn-lg active" href="/move?direction=left" role="button">Left ‚óÄÔ∏è</a>
                  <a id="btnRight" class="btn btn-move btn-lg active" href="/move?direction=right" role="button">Right ‚ñ∂Ô∏è</a>
                  <a class="btn btn-map btn-lg active" href="/map" role="button">Map üó∫Ô∏è</a>
                  <a class="btn btn-quit btn-lg active" href="/logout" role="button">Logout üåÉ</a>
               </div>

                <div class="card mt-3">


    <div class="card-header">
      <h4 class="card-title">Available Resources</h4>
    </div>
    <div class="card-body">
      <p class="card-text">Wood: {{file["wood"]}}</p>
      <p class="card-text">Food: {{file["food"]}}</p>
      <p class="card-text">Bismuth: {{file["bismuth"]}}</p>
    </div>
  </div>

            </div>
         </div>
      </div>

      <div class="container">
            <hr/>

         <div class="row mb-3 align-items-start">
            <!-- Construction menu column -->
            <div class="col-md-6">
               <h4>Construction Menu</h4>
               <div class="row mb-3">
                  <div class="col">
                     <a class="btn btn-light btn-lg btn-block" href="/build?entity=house&name=town1">
                        <img src="/img/assets/house.png" alt="House Icon" class="menu-icon"> House
                     </a>
                     <p>Build a house for your town</p>
                  </div>
               </div>

               <div class="row mb-3">
                  <div class="col">
                     <a class="btn btn-light btn-lg btn-block" href="/build?entity=mine&name=town1">Mine</a>
                     <p>Start a mine to gather resources</p>
                  </div>
               </div>
               <div class="row mb-3">
                  <div class="col">
                     <a class="btn btn-light btn-lg btn-block" href="/build?entity=farm&name=town1">Farm</a>
                     <p>Establish a farm to produce food</p>
                  </div>
               </div>
               <div class="row mb-3">
                  <div class="col">
                     <a class="btn btn-light btn-lg btn-block" href="/build?entity=barracks&name=town1">Barracks</a>
                     <p>Build barracks to train your army</p>
                  </div>
               </div>
               <div class="row mb-3">
                  <div class="col">
                     <a class="btn btn-light btn-lg btn-block" href="/build?entity=sawmill&name=wc1">Sawmill</a>
                     <p>Construct a sawmill for wood production</p>
                  </div>
               </div>
               <div class="row mb-3">
                  <div class="col">
                     <a class="btn btn-light btn-lg btn-block" href="/build?entity=inn&name=wc1">Inn</a>
                     <p>Build a place to rest</p>
                  </div>
               </div>

            </div>

            <!-- tile column -->
            <div class="col-md-6">
               <h4>Current Tile</h4>

               {%for entity in on_tile%}


               <div class="col">
                <p>Type: {{entity["data"]["type"]}}</p>
                <p><img src=/img/assets/{{entity["data"]["type"]}}.png alt="Item Icon" class="menu-icon"></p>
               <p>Position: {{entity["x_pos"]}}, {{entity["y_pos"]}}</p>
                <p>Control: {{entity["control"]}}</p>

                   {%for action in actions.get(entity["data"]["type"])%}
                        <p>Actions: <a id="btnAct" class="btn btn-move btn-lg active" href="{{action['action']}}" role="button">{{action['name']}}</a></p>
                    {%end%}

               </div>

                  {%end%}

               <div class="col">

               </div>
            </div>


            <!-- items column -->
            <div class="col-md-6">
               <h4>Inventory</h4>

                  {%for item in file["items"]%}
               <div class="col">
                <p>Type: {{item["type"]}}</p>
                <p><img src=/img/assets/{{item["type"]}}.png alt="Item Icon" class="menu-icon"></p>
                <p>{{item["desc"]}}</p>
               </div>

                  {%end%}


            </div>

            <!-- buildings column -->
            <div class="col-md-6">
               <h4>Your Buildings</h4>

                  {%for building in file["construction"]%}
               <div class="col">
                <p>Type: {{building["type"]}}</p>
                <p><img src=/img/assets/{{building["type"]}}.png alt="Item Icon" class="menu-icon"></p>
                <p>Position: ({{building["x_pos"]}}, {{building["y_pos"]}})</p>
                <p>Hitpoints: {{building["hp"]}}</p>

               </div>

                  {%end%}

            </div>




         </div>

      </div>

      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
      <script>
         document.addEventListener("keydown", function(event) {
             var direction = null;
             switch (event.key) {
                 case "ArrowLeft":
                     direction = "left";
                     break;
                 case "ArrowRight":
                     direction = "right";
                     break;
                 case "ArrowUp":
                     direction = "up";
                     break;
                 case "ArrowDown":
                     direction = "down";
                     break;
             }

             if (direction) {
                 // Simulate the click on the corresponding button
                 var button = document.getElementById('btn' + direction.charAt(0).toUpperCase() + direction.slice(1));
                 if (button) {
                     button.click();
                 }
             }
         });
      </script>
   </body>
</html>
